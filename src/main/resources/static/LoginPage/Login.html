<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="Login.css" >
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
</head>
<body>
    <div class="bg-img">
        <div class="content">
            <header>欢迎登录</header>
            <form id="login_form" action="#" >
                <div class="field">
                    <span class="fa">
                        <img src="../img/user.svg">
                    </span>
                    <input type="text" name="phone" required placeholder="请输入手机号">
                </div>
                <div class="field space">
                    <span class="fa">
                        <img src="../img/lock.svg">
                    </span>
                    <input type="password" name="password" class="password" required placeholder="请输入密码">
                    <span class="show">SHOW</span>
                </div>
                <div class="pass">
                    <a href="#">忘记密码</a>
                </div>
                <div class="field">
                    <input id="login_btn" type="button" value="登录">
                </div>
                <div class="signup">没有账号？
                    <a href="../RegisterPage/Register.html" target="_self">注册</a>
                </div>
                <script>
                    const pass_field=document.querySelector('.password');
                    const show_btn=document.querySelector('.show');
                    show_btn.addEventListener('click',function(){
                        if(pass_field.type==="password"){
                            pass_field.type="text";
                            show_btn.style.color="#3498db";
                            show_btn.textContent="HIDE";
                        }else {
                            pass_field.type="password";
                            show_btn.style.color="#222"
                            show_btn.textContent="SHOW";
                        }
                    })
                </script>

            </form>
            <script type="text/javascript" src="../JavaScriptTool/jquery-3.6.0.js"></script>
            <script type="text/javascript">
                $('#login_btn').click(function (){
                    $.ajax({
                        url:"http://127.0.0.1:8080/login",
                        type:"post",
                        data: $('#login_form').serialize(),
                        dataType:"text",
                        success: function(data) {
                            if (data.length !== 0){
                                localStorage.token = data;
                                location.href = "../IndexPage/Index.html"
                            }
                            else {
                                alert("密码或手机号错误")
                            }
                        },
                        error: function(XMLHttpRequest, textStatus, errorThrown) {
                            alert(" error")
                        },
                    })
                })
            </script>
        </div>
    </div>

</body>
</html>